"use strict";(()=>{var e={};e.id=988,e.ids=[988],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{e.exports=require("punycode")},27910:e=>{e.exports=require("stream")},28354:e=>{e.exports=require("util")},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{e.exports=require("crypto")},55591:e=>{e.exports=require("https")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{e.exports=require("zlib")},79551:e=>{e.exports=require("url")},81630:e=>{e.exports=require("http")},92092:(e,t,r)=>{r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>x,serverHooks:()=>f,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>h});var o={};r.r(o),r.d(o,{OPTIONS:()=>d,POST:()=>g});var s=r(96559),n=r(48088),i=r(37719),a=r(32190),c=r(22563),u=r(73488),p=r(8898);function l(e){return e.headers.set("Access-Control-Allow-Origin","*"),e.headers.set("Access-Control-Allow-Methods","GET, POST, OPTIONS"),e.headers.set("Access-Control-Allow-Headers","Content-Type, Authorization"),e}async function d(){return l(new a.NextResponse(null,{status:204}))}async function g(e){try{console.log("Requesting access token for apply-custom-code");let t=await p.A.verifyAuth(e);if(!t)return console.log("Authentication failed:",t),l(a.NextResponse.json({error:"Unauthorized",details:t||"Authentication failed"},{status:401}));console.log("Requesting site-id for apply-custom-code");let r=await p.A.getSiteIdFromAccessToken(t);if(!r)return console.log("SiteId not found:",r),l(a.NextResponse.json({error:"Unauthorized",details:r||"SiteId failed"},{status:401}));console.log("Creating Webflow client with access token...");let o=new c.WebflowClient({accessToken:t});console.log("Initializing Script Controller...");let s=new u.Y(o);console.log("Registering hosted scripts...");let n=await s.registerHostedScripts(r);return console.log("Script registration result:",n),l(a.NextResponse.json({result:n},{status:200}))}catch(e){return console.error("Error registering custom code:",e instanceof Error?e.message:e),l(a.NextResponse.json({error:"Failed to register custom code",details:e instanceof Error?e.message:String(e)},{status:500}))}}let x=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/custom-code/apply-custom-code/route",pathname:"/api/custom-code/apply-custom-code",filename:"route",bundlePath:"app/api/custom-code/apply-custom-code/route"},resolvedPagePath:"D:\\SearchApp\\search-server\\app\\api\\custom-code\\apply-custom-code\\route.ts",nextConfigOutput:"standalone",userland:o}),{workAsyncStorage:m,workUnitAsyncStorage:h,serverHooks:f}=x;function w(){return(0,i.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:h})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[297,190,563,595,149],()=>r(92092));module.exports=o})();
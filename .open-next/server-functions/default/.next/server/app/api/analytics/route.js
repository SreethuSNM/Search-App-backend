(()=>{var e={};e.id=70,e.ids=[70],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6426:(e,t,n)=>{"use strict";n.d(t,{DM:()=>s});let r=Symbol.for("__cloudflare-context__");function s(e={async:!1}){return e.async?a():function(){let e=o();if(e)return e;if(function(){let e=globalThis;return e.__NEXT_DATA__?.nextExport===!0}())throw Error("\n\nERROR: `getCloudflareContext` has been called in sync mode in either a static route or at the top level of a non-static one, both cases are not allowed but can be solved by either:\n  - make sure that the call is not at the top level and that the route is not static\n  - call `getCloudflareContext({async: true})` to use the `async` mode\n  - avoid calling `getCloudflareContext` in the route\n");throw Error(i)}()}function o(){return globalThis[r]}async function a(){let e=o();if(e)return e;{let e=await l();return function(e){globalThis[r]=e}(e),e}}async function l(){let{getPlatformProxy:e}=await import(`${"__wrangler".replaceAll("_","")}`),{env:t,cf:n,ctx:r}=await e({environment:process.env.NEXT_DEV_WRANGLER_ENV});return{env:t,cf:n,ctx:r}}let i='\n\nERROR: `getCloudflareContext` has been called without having called `initOpenNextCloudflareForDev` from the Next.js config file.\nYou should update your Next.js config file as shown below:\n\n   ```\n   // next.config.mjs\n\n   import { initOpenNextCloudflareForDev } from "@opennextjs/cloudflare";\n\n   initOpenNextCloudflareForDev();\n\n'+"   const nextConfig = { ... };\n   export default nextConfig;\n   ```\n\n"},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25304:(e,t,n)=>{"use strict";n.r(t),n.d(t,{patchFetch:()=>x,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>f});var r={};n.r(r),n.d(r,{GET:()=>d,OPTIONS:()=>u});var s=n(96559),o=n(48088),a=n(37719),l=n(32190),i=n(6426);function c(e){return e.headers.set("Access-Control-Allow-Origin","*"),e.headers.set("Access-Control-Allow-Methods","GET, OPTIONS"),e.headers.set("Access-Control-Allow-Headers","Content-Type, Authorization"),e}async function u(){return c(new l.NextResponse(null,{status:204}))}async function d(e){try{let t;let{searchParams:n}=new URL(e.url),r=n.get("siteUrl"),s=n.get("siteId");if(!r||!s)return c(l.NextResponse.json({success:!1,error:"Missing siteUrl or siteId"},{status:400}));let{env:o}=await (0,i.DM)({async:!0}),a=await o.WEBFLOW_AUTHENTICATION.get(`site-auth:${s}`);if(console.log("Stored auth data:",a),!a)return c(l.NextResponse.json({success:!1,error:"Unauthorized - No stored auth"},{status:401}));let u=JSON.parse(a);if(console.log("Parsed auth data:",u),!u.accessToken)return c(l.NextResponse.json({success:!1,error:"Unauthorized - Invalid auth data"},{status:401}));let d=await fetch(r);if(!d.ok)throw Error(`Failed to fetch site content: ${d.statusText}`);let p=await d.text(),h=/<script([^>]*)>([\s\S]*?)<\/script>/g,f=/src=["']([^"']+)["']/,g=/type=["']([^"']+)["']/,x=/async/,y=/defer/,w=[];for(;null!==(t=h.exec(p));){let e=t[1],n=t[2],r=e.match(f),s=e.match(g),o=x.test(e),a=y.test(e);(r&&(r[1].includes("google-analytics")||r[1].includes("googletagmanager")||r[1].includes("gtag")||r[1].includes("hotjar")||r[1].includes("facebook")||r[1].includes("fbq"))||n&&(n.includes("hotjar")||n.includes("fbq")||n.includes("dataLayer")||n.includes("gtag")||n.includes("googletagmanager")))&&w.push({src:r?r[1]:null,content:n.trim()||null,type:s?s[1]:null,async:o,defer:a})}console.log("Found analytics scripts:",w.length),w.forEach(e=>{console.log("Script:",{src:e.src,type:e.type,async:e.async,defer:e.defer,contentLength:e.content?.length})});let m={analyticsScripts:w,totalScripts:w.length,totalAnalyticsScripts:w.length};return c(l.NextResponse.json({success:!0,data:m}))}catch(e){return console.error("Error fetching analytics scripts:",e),c(l.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Failed to fetch analytics scripts"},{status:500}))}}let p=new s.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/analytics/route",pathname:"/api/analytics",filename:"route",bundlePath:"app/api/analytics/route"},resolvedPagePath:"C:\\Seattle\\Cookie App\\Consernbit-Cloudflare-Server-Test\\cb-server\\app\\api\\analytics\\route.ts",nextConfigOutput:"standalone",userland:r}),{workAsyncStorage:h,workUnitAsyncStorage:f,serverHooks:g}=p;function x(){return(0,a.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:f})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[297,190],()=>n(25304));module.exports=r})();